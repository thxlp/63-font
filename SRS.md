# Software Requirements Specification (SRS)
## ระบบจัดการอาหารและโภชนาการ (Food & Nutrition Management System)

---

## 1. บทนำ

### 1.1 วัตถุประสงค์
เอกสารนี้เป็นข้อกำหนดความต้องการของซอฟต์แวร์ (Software Requirements Specification) สำหรับระบบจัดการอาหารและโภชนาการ ซึ่งเป็นแอปพลิเคชันบนเว็บที่ช่วยให้ผู้ใช้สามารถค้นหาข้อมูลอาหาร คำนวณค่าดัชนีมวลกาย (BMI) และจัดการตะกร้าอาหารได้

### 1.2 ขอบเขตของระบบ
ระบบนี้เป็น Web Application ที่ทำงานบนเบราว์เซอร์ โดยมีฟีเจอร์หลักดังนี้:
- การลงทะเบียนและเข้าสู่ระบบ
- คำนวณ BMI และแคลอรี่ที่ควรได้รับ
- ค้นหาผลิตภัณฑ์อาหารจาก OpenFoodFacts API
- ค้นหาวิธีทำอาหารจาก Spoonacular API
- สแกนบาร์โค้ดเพื่อค้นหาข้อมูลสินค้า
- จัดการตะกร้าสินค้าและคำนวณแคลอรี่รวม
- ดูประวัติตะกร้าที่บันทึกไว้
- ดูและจัดการโปรไฟล์ผู้ใช้

### 1.3 คำจำกัดความและตัวย่อ
- **BMI**: Body Mass Index (ดัชนีมวลกาย)
- **API**: Application Programming Interface
- **DFD**: Data Flow Diagram
- **SRS**: Software Requirements Specification
- **localStorage**: Web Storage API สำหรับเก็บข้อมูลในเบราว์เซอร์

---

## 2. Use Case Diagram

### 2.1 Actors
1. **ผู้ใช้ (User)**: ผู้ใช้งานทั่วไปของระบบ
2. **Backend API Server**: เซิร์ฟเวอร์ที่ให้บริการ API (Production: https://63-back-production.up.railway.app)
3. **OpenFoodFacts API**: API ภายนอกสำหรับค้นหาข้อมูลผลิตภัณฑ์อาหาร
4. **Spoonacular API**: API ภายนอกสำหรับค้นหาวิธีทำอาหาร

### 2.2 Use Cases

```
┌─────────────────────────────────────────────────────────────┐
│                    Food & Nutrition System                   │
└─────────────────────────────────────────────────────────────┘
                              │
        ┌─────────────────────┼─────────────────────┐
        │                     │                     │
        ▼                     ▼                     ▼
┌──────────────┐      ┌──────────────┐      ┌──────────────┐
│   Register   │      │    Login    │      │   Logout    │
│   (สมัคร)    │      │  (เข้าสู่ระบบ) │      │ (ออกจากระบบ) │
└──────────────┘      └──────────────┘      └──────────────┘
        │                     │                     │
        ▼                     ▼                     ▼
┌──────────────┐      ┌──────────────┐      ┌──────────────┐
│ Calculate    │      │  Search      │      │  Search      │
│ BMI          │      │  Products    │      │  Recipes     │
│ (คำนวณ BMI)  │      │  (ค้นหาสินค้า) │      │ (ค้นหาวิธีทำ) │
└──────────────┘      └──────────────┘      └──────────────┘
        │                     │                     │
        ▼                     ▼                     ▼
┌──────────────┐      ┌──────────────┐      ┌──────────────┐
│ Scan         │      │  Add to      │      │  View        │
│ Barcode      │      │  Cart        │      │  Cart        │
│ (สแกนบาร์โค้ด) │      │  (เพิ่มตะกร้า) │      │ (ดูตะกร้า)    │
└──────────────┘      └──────────────┘      └──────────────┘
        │                     │                     │
        ▼                     ▼                     ▼
┌──────────────┐      ┌──────────────┐      ┌──────────────┐
│ View         │      │  Finish      │      │  View        │
│ Nutrition    │      │  Cart        │      │  History     │
│ (ดูโภชนาการ)  │      │  (เสร็จสิ้น)   │      │ (ดูประวัติ)    │
└──────────────┘      └──────────────┘      └──────────────┘
        │                     │                     │
        ▼                     ▼                     ▼
┌──────────────┐      ┌──────────────┐
│ View         │      │  Calculate   │
│ Profile      │      │  Total       │
│ (ดูโปรไฟล์)   │      │  Nutrition   │
└──────────────┘      └──────────────┘
```

### 2.3 Use Case Descriptions

#### UC-01: Register (สมัครสมาชิก)
- **Actor**: ผู้ใช้
- **Precondition**: ผู้ใช้ยังไม่ได้ลงทะเบียน
- **Main Flow**:
  1. ผู้ใช้กรอกข้อมูล Username, Email, Password, Confirm Password
  2. ระบบตรวจสอบความถูกต้องของข้อมูล
  3. ระบบบันทึกข้อมูลลง localStorage
  4. ระบบนำทางไปหน้า BMI Calculator
- **Postcondition**: ผู้ใช้สามารถเข้าสู่ระบบได้

#### UC-02: Login (เข้าสู่ระบบ)
- **Actor**: ผู้ใช้
- **Precondition**: ผู้ใช้มีบัญชีแล้ว
- **Main Flow**:
  1. ผู้ใช้กรอก Username และ Password
  2. ระบบส่งข้อมูลไปยัง Backend API
  3. ระบบรับ Token และข้อมูลผู้ใช้
  4. ระบบบันทึก Token และข้อมูลผู้ใช้ลง localStorage
  5. ระบบนำทางไปหน้าหลัก
- **Postcondition**: ผู้ใช้เข้าสู่ระบบสำเร็จ

#### UC-03: Calculate BMI (คำนวณ BMI)
- **Actor**: ผู้ใช้
- **Precondition**: ผู้ใช้ลงทะเบียนแล้ว
- **Main Flow**:
  1. ผู้ใช้กรอกน้ำหนัก (kg) และส่วนสูง (cm)
  2. ระบบคำนวณ BMI = น้ำหนัก / (ส่วนสูง/100)²
  3. ระบบคำนวณแคลอรี่ที่ควรได้รับ
  4. ระบบแสดงผลลัพธ์
  5. ผู้ใช้กดปุ่ม "ต่อไป" เพื่อบันทึกข้อมูล
  6. ระบบส่งข้อมูลไปยัง Backend API
- **Postcondition**: ข้อมูล BMI ถูกบันทึกในระบบ

#### UC-04: Search Products (ค้นหาสินค้า)
- **Actor**: ผู้ใช้
- **Precondition**: ผู้ใช้เข้าสู่ระบบแล้ว
- **Main Flow**:
  1. ผู้ใช้กรอกคำค้นหาในช่องค้นหาผลิตภัณฑ์
  2. ระบบส่งคำค้นหาไปยัง Backend API
  3. Backend API เรียก OpenFoodFacts API
  4. ระบบแสดงผลลัพธ์การค้นหา
  5. ผู้ใช้สามารถดูรายละเอียดโภชนาการและเพิ่มลงตะกร้าได้
- **Postcondition**: แสดงผลลัพธ์การค้นหา

#### UC-05: Search Recipes (ค้นหาวิธีทำอาหาร)
- **Actor**: ผู้ใช้
- **Precondition**: ผู้ใช้เข้าสู่ระบบแล้ว
- **Main Flow**:
  1. ผู้ใช้กรอกคำค้นหาในช่องค้นหาวิธีทำอาหาร
  2. ระบบส่งคำค้นหาไปยัง Spoonacular API
  3. ระบบแสดงผลลัพธ์การค้นหา
  4. ผู้ใช้สามารถดูรายละเอียดโภชนาการและเพิ่มลงตะกร้าได้
- **Postcondition**: แสดงผลลัพธ์การค้นหา

#### UC-06: Scan Barcode (สแกนบาร์โค้ด)
- **Actor**: ผู้ใช้
- **Precondition**: ผู้ใช้เข้าสู่ระบบแล้ว
- **Main Flow**:
  1. ผู้ใช้อัปโหลดรูปภาพบาร์โค้ด
  2. ระบบส่งรูปภาพไปยัง Backend API
  3. Backend API สแกนบาร์โค้ดและค้นหาข้อมูลสินค้า
  4. ระบบแสดงผลลัพธ์พร้อมข้อมูลโภชนาการ
- **Postcondition**: แสดงข้อมูลสินค้าจากบาร์โค้ด

#### UC-07: Add to Cart (เพิ่มลงตะกร้า)
- **Actor**: ผู้ใช้
- **Precondition**: ผู้ใช้เข้าสู่ระบบแล้ว
- **Main Flow**:
  1. ผู้ใช้เลือกสินค้าหรือสูตรอาหาร
  2. ผู้ใช้กดปุ่ม "เพิ่มลงตะกร้า"
  3. ระบบตรวจสอบว่าสินค้าอยู่ในตะกร้าแล้วหรือไม่
  4. ถ้ายังไม่มี ระบบเพิ่มสินค้าลงตะกร้าใน localStorage
  5. ระบบอัปเดต badge จำนวนสินค้าในตะกร้า
- **Postcondition**: สินค้าถูกเพิ่มลงตะกร้า

#### UC-08: View Cart (ดูตะกร้า)
- **Actor**: ผู้ใช้
- **Precondition**: ผู้ใช้เข้าสู่ระบบแล้ว
- **Main Flow**:
  1. ผู้ใช้เปิดหน้าตะกร้า
  2. ระบบดึงข้อมูลตะกร้าจาก localStorage
  3. ระบบแสดงรายการสินค้าในตะกร้า
  4. ระบบคำนวณและแสดงสรุปแคลอรี่รวม
  5. ผู้ใช้สามารถลบสินค้าหรือเสร็จสิ้นตะกร้าได้
- **Postcondition**: แสดงข้อมูลตะกร้า

#### UC-09: Finish Cart (เสร็จสิ้นตะกร้า)
- **Actor**: ผู้ใช้
- **Precondition**: มีสินค้าในตะกร้า
- **Main Flow**:
  1. ผู้ใช้กดปุ่ม "เสร็จสิ้น"
  2. ระบบคำนวณแคลอรี่รวม
  3. ระบบบันทึกประวัติตะกร้าลง localStorage
  4. ระบบล้างตะกร้าปัจจุบัน
  5. ระบบแสดงข้อความแจ้งเตือน
- **Postcondition**: ประวัติถูกบันทึกและตะกร้าถูกล้าง

#### UC-10: View History (ดูประวัติ)
- **Actor**: ผู้ใช้
- **Precondition**: มีประวัติตะกร้า
- **Main Flow**:
  1. ผู้ใช้เปิดหน้าประวัติ
  2. ระบบดึงประวัติตะกร้าจาก localStorage
  3. ระบบแสดงรายการประวัติพร้อมวันที่และสรุปแคลอรี่
  4. ผู้ใช้สามารถดูรายละเอียดหรือลบประวัติได้
- **Postcondition**: แสดงประวัติตะกร้า

#### UC-11: View Profile (ดูโปรไฟล์)
- **Actor**: ผู้ใช้
- **Precondition**: ผู้ใช้เข้าสู่ระบบแล้ว
- **Main Flow**:
  1. ผู้ใช้เปิดหน้าโปรไฟล์
  2. ระบบดึงข้อมูลผู้ใช้จาก localStorage
  3. ระบบเรียก Backend API เพื่อดึงข้อมูล BMI ล่าสุด
  4. ระบบแสดงข้อมูลผู้ใช้และข้อมูล BMI
- **Postcondition**: แสดงข้อมูลโปรไฟล์

---

## 3. Data Flow Diagram (DFD)

### 3.1 DFD Level 0 (Context Diagram)

```
                    ┌─────────────────┐
                    │   ผู้ใช้ (User)  │
                    └────────┬────────┘
                             │
        ┌────────────────────┼────────────────────┐
        │                    │                    │
        ▼                    ▼                    ▼
┌──────────────┐    ┌──────────────┐    ┌──────────────┐
│   ข้อมูล      │    │   คำค้นหา     │    │   รูปภาพ      │
│   เข้าสู่ระบบ  │    │   สินค้า/สูตร │    │   บาร์โค้ด    │
└──────────────┘    └──────────────┘    └──────────────┘
        │                    │                    │
        │                    │                    │
        ▼                    ▼                    ▼
┌─────────────────────────────────────────────────────────┐
│                                                         │
│         ระบบจัดการอาหารและโภชนาการ                        │
│         (Food & Nutrition Management System)            │
│                                                         │
└─────────────────────────────────────────────────────────┘
        │                    │                    │
        ▼                    ▼                    ▼
┌──────────────┐    ┌──────────────┐    ┌──────────────┐
│   Token &    │    │   ข้อมูล      │    │   ข้อมูล      │
│   User Data  │    │   สินค้า      │    │   สูตรอาหาร   │
└──────────────┘    └──────────────┘    └──────────────┘
        │                    │                    │
        │                    │                    │
        ▼                    ▼                    ▼
┌──────────────┐    ┌──────────────┐    ┌──────────────┐
│  Backend     │    │ OpenFood    │    │ Spoonacular  │
│  API Server  │    │ Facts API    │    │ API          │
└──────────────┘    └──────────────┘    └──────────────┘
```

### 3.2 DFD Level 1

```
┌─────────────────────────────────────────────────────────────────┐
│                    ระบบจัดการอาหารและโภชนาการ                      │
└─────────────────────────────────────────────────────────────────┘

┌──────────────┐
│   ผู้ใช้      │
└──────┬───────┘
       │
       │ 1. ข้อมูลลงทะเบียน
       ▼
┌──────────────────┐         ┌──────────────┐
│  1.0 การลงทะเบียน  │─────────▶│  Backend API │
│  และเข้าสู่ระบบ   │         └──────────────┘
└──────────────────┘                 │
       │                              │
       │ 2. Token & User Data         │
       ▼                              │
┌──────────────┐                     │
│ localStorage │                     │
└──────────────┘                     │
       │                              │
       │ 3. ข้อมูลน้ำหนัก/ส่วนสูง      │
       ▼                              │
┌──────────────────┐                 │
│  2.0 คำนวณ BMI   │─────────────────┘
└──────────────────┘
       │
       │ 4. BMI & Calories
       ▼
┌──────────────┐
│ localStorage │
└──────────────┘
       │
       │ 5. คำค้นหาสินค้า
       ▼
┌──────────────────┐         ┌──────────────┐
│  3.0 ค้นหา       │─────────▶│ OpenFood    │
│  สินค้า          │         │ Facts API    │
└──────────────────┘         └──────────────┘
       │                              │
       │ 6. ข้อมูลสินค้า              │
       ▼                              │
┌──────────────┐                     │
│ localStorage │                     │
└──────────────┘                     │
       │                              │
       │ 7. คำค้นหาสูตรอาหาร          │
       ▼                              │
┌──────────────────┐                 │
│  4.0 ค้นหา       │─────────────────┘
│  สูตรอาหาร       │
└──────────────────┘
       │
       │ 8. ข้อมูลสูตรอาหาร
       ▼
┌──────────────┐
│ localStorage │
└──────────────┘
       │
       │ 9. รูปภาพบาร์โค้ด
       ▼
┌──────────────────┐         ┌──────────────┐
│  5.0 สแกน        │─────────▶│  Backend API │
│  บาร์โค้ด        │         └──────────────┘
└──────────────────┘                 │
       │                              │
       │ 10. ข้อมูลสินค้า             │
       ▼                              │
┌──────────────┐                     │
│ localStorage │                     │
└──────────────┘                     │
       │                              │
       │ 11. สินค้า/สูตรอาหาร         │
       ▼                              │
┌──────────────────┐                 │
│  6.0 จัดการ      │─────────────────┘
│  ตะกร้า           │
└──────────────────┘
       │
       │ 12. ข้อมูลตะกร้า
       ▼
┌──────────────┐
│ localStorage │
└──────────────┘
       │
       │ 13. คำขอดูประวัติ
       ▼
┌──────────────────┐
│  7.0 ดูประวัติ    │
│  ตะกร้า           │
└──────────────────┘
       │
       │ 14. ประวัติตะกร้า
       ▼
┌──────────────┐
│ localStorage │
└──────────────┘
```

---

## 3.2 System Features

### 3.2.1 Activity Diagram - กระบวนการสแกนบาร์โค้ดและค้นหาข้อมูลสินค้า

```
                    ┌─────────────┐
                    │   เริ่มต้น   │
                    └──────┬──────┘
                           │
                           │ [เลือกรูปภาพบาร์โค้ด]
                           ▼
                    ┌─────────────┐
                    │ อัปโหลดรูปภาพ│
                    └──────┬──────┘
                           │
                           │ [ยืนยันการอัปโหลด]
                           ▼
                    ┌─────────────┐
                    │ ส่งรูปภาพ   │
                    │ ไป Backend  │
                    └──────┬──────┘
                           │
                           │ [Backend สแกนบาร์โค้ด]
                           ▼
                    ┌─────────────┐
                    │ ได้บาร์โค้ด  │
                    └──────┬──────┘
                           │
                           │ [ค้นหาข้อมูลสินค้า]
                           ▼
                    ┌─────────────┐
                    │ เรียก        │
                    │ OpenFoodFacts│
                    │ API         │
                    └──────┬──────┘
                           │
        ┌──────────────────┼──────────────────┐
        │                  │                  │
        │ [พบข้อมูล]       │ [ไม่พบข้อมูล]     │ [เกิดข้อผิดพลาด]
        ▼                  ▼                  ▼
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│ แสดงข้อมูล   │    │ แสดงข้อความ  │    │ แสดงข้อผิด   │
│ สินค้า       │    │ ไม่พบข้อมูล  │    │ พลาด        │
└──────┬──────┘    └──────┬──────┘    └──────┬──────┘
       │                  │                  │
       │ [ดูโภชนาการ]      │                  │
       ▼                  │                  │
┌─────────────┐          │                  │
│ แสดงข้อมูล   │          │                  │
│ โภชนาการ     │          │                  │
└──────┬──────┘          │                  │
       │                  │                  │
       │ [เพิ่มลงตะกร้า]   │                  │
       ▼                  │                  │
┌─────────────┐          │                  │
│ บันทึกตะกร้า │          │                  │
└──────┬──────┘          │                  │
       │                  │                  │
       └──────────────────┴──────────────────┘
                           │
                           │ [เสร็จสิ้น]
                           ▼
                    ┌─────────────┐
                    │   สิ้นสุด    │
                    └─────────────┘
```

### 3.2.2 Activity Diagram - กระบวนการเสร็จสิ้นตะกร้าและบันทึกประวัติ

```
                    ┌─────────────┐
                    │   เริ่มต้น   │
                    └──────┬──────┘
                           │
                           │ [เปิดหน้าตะกร้า]
                           ▼
                    ┌─────────────┐
                    │ ดึงข้อมูล    │
                    │ ตะกร้า      │
                    └──────┬──────┘
                           │
                           │ [ตรวจสอบตะกร้า]
                           ▼
                    ┌─────────────┐
                    │ ตะกร้า      │
                    │ ว่างเปล่า?  │
                    └──────┬──────┘
                           │
        ┌──────────────────┼──────────────────┐
        │                  │                  │
        │ [ใช่]            │ [ไม่ใช่]          │
        ▼                  ▼                  │
┌─────────────┐    ┌─────────────┐          │
│ แสดงข้อความ  │    │ แสดงรายการ   │          │
│ ตะกร้าว่าง   │    │ สินค้า       │          │
└──────┬──────┘    └──────┬──────┘          │
       │                  │                  │
       │                  │ [คำนวณแคลอรี่]    │
       │                  ▼                  │
       │          ┌─────────────┐          │
       │          │ คำนวณแคลอรี่ │          │
       │          │ รวม         │          │
       │          └──────┬──────┘          │
       │                  │                  │
       │                  │ [ดึงข้อมูลเป้าหมาย]│
       │                  ▼                  │
       │          ┌─────────────┐          │
       │          │ ดึงเป้าหมาย  │          │
       │          │ แคลอรี่      │          │
       │          └──────┬──────┘          │
       │                  │                  │
       │                  │ [เปรียบเทียบ]    │
       │                  ▼                  │
       │          ┌─────────────┐          │
       │          │ เกินเป้าหมาย?│          │
       │          └──────┬──────┘          │
       │                  │                  │
       │      ┌───────────┼───────────┐    │
       │      │           │           │    │
       │      │ [ใช่]     │ [ไม่ใช่]   │    │
       │      ▼           ▼           │    │
       │ ┌─────────┐ ┌─────────┐     │    │
       │ │แสดงคำเตือน│ │ไม่แสดงคำเตือน│     │    │
       │ └────┬────┘ └────┬────┘     │    │
       │      │           │           │    │
       │      └───────────┴───────────┘    │
       │                  │                  │
       │                  │ [กดเสร็จสิ้น]     │
       │                  ▼                  │
       │          ┌─────────────┐          │
       │          │ สร้างประวัติ │          │
       │          │ ตะกร้า      │          │
       │          └──────┬──────┘          │
       │                  │                  │
       │                  │ [บันทึกประวัติ]   │
       │                  ▼                  │
       │          ┌─────────────┐          │
       │          │ บันทึกผ่าน   │          │
       │          │ API         │          │
       │          └──────┬──────┘          │
       │                  │                  │
       │      ┌───────────┼───────────┐    │
       │      │           │           │    │
       │      │ [สำเร็จ]  │ [ล้มเหลว] │    │
       │      ▼           ▼           │    │
       │ ┌─────────┐ ┌─────────┐     │    │
       │ │บันทึกใน   │ │บันทึกใน   │     │    │
       │ │Database │ │localStorage│   │    │
       │ └────┬────┘ └────┬────┘     │    │
       │      │           │           │    │
       │      └───────────┴───────────┘    │
       │                  │                  │
       │                  │ [บันทึก Daily Log]│
       │                  ▼                  │
       │          ┌─────────────┐          │
       │          │ บันทึก Log   │          │
       │          │ แคลอรี่รายวัน│          │
       │          └──────┬──────┘          │
       │                  │                  │
       │                  │ [ล้างตะกร้า]     │
       │                  ▼                  │
       │          ┌─────────────┐          │
       │          │ ล้างตะกร้า   │          │
       │          │ ปัจจุบัน     │          │
       │          └──────┬──────┘          │
       │                  │                  │
       │                  │ [แสดงแจ้งเตือน]  │
       │                  ▼                  │
       │          ┌─────────────┐          │
       │          │ แจ้งเตือน    │          │
       │          │ สำเร็จ      │          │
       │          └──────┬──────┘          │
       │                  │                  │
       └──────────────────┴──────────────────┘
                           │
                           │ [เสร็จสิ้น]
                           ▼
                    ┌─────────────┐
                    │   สิ้นสุด    │
                    └─────────────┘
```

### 3.2.3 Activity Diagram - กระบวนการค้นหาสินค้าและเพิ่มลงตะกร้า

```
                    ┌─────────────┐
                    │   เริ่มต้น   │
                    └──────┬──────┘
                           │
                           │ [เปิดหน้าค้นหาสินค้า]
                           ▼
                    ┌─────────────┐
                    │ กรอกคำค้นหา  │
                    └──────┬──────┘
                           │
                           │ [กดปุ่มค้นหา]
                           ▼
                    ┌─────────────┐
                    │ ส่งคำค้นหา   │
                    │ ไป Backend  │
                    └──────┬──────┘
                           │
                           │ [Backend เรียก OpenFoodFacts API]
                           ▼
                    ┌─────────────┐
                    │ เรียก        │
                    │ OpenFoodFacts│
                    │ API         │
                    └──────┬──────┘
                           │
        ┌──────────────────┼──────────────────┐
        │                  │                  │
        │ [พบข้อมูล]       │ [ไม่พบข้อมูล]     │ [เกิดข้อผิดพลาด]
        ▼                  ▼                  ▼
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│ แสดงผลลัพธ์ │    │ แสดงข้อความ  │    │ แสดงข้อผิด   │
│ การค้นหา    │    │ ไม่พบข้อมูล  │    │ พลาด        │
└──────┬──────┘    └──────┬──────┘    └──────┬──────┘
       │                  │                  │
       │ [คลิกดูรายละเอียด]│                  │
       ▼                  │                  │
┌─────────────┐          │                  │
│ แสดงข้อมูล   │          │                  │
│ รายละเอียด   │          │                  │
│ สินค้า       │          │                  │
└──────┬──────┘          │                  │
       │                  │                  │
       │ [ดูโภชนาการ]      │                  │
       ▼                  │                  │
┌─────────────┐          │                  │
│ แสดงข้อมูล   │          │                  │
│ โภชนาการ     │          │                  │
└──────┬──────┘          │                  │
       │                  │                  │
       │ [เพิ่มลงตะกร้า]   │                  │
       ▼                  │                  │
┌─────────────┐          │                  │
│ ตรวจสอบ      │          │                  │
│ สินค้าใน     │          │                  │
│ ตะกร้า       │          │                  │
└──────┬──────┘          │                  │
       │                  │                  │
       │ [สินค้าอยู่ในตะกร้า?]
       ▼
┌─────────────┐
│ สินค้า       │
│ อยู่ใน       │
│ ตะกร้า?      │
└──────┬──────┘
       │
       │
       │      ┌───────────┼───────────┐
       │      │           │           │
       │      │ [ใช่]      │ [ไม่ใช่]   │
       │      ▼           ▼           │
       │ ┌─────────┐ ┌─────────┐     │
       │ │แสดงข้อความ│ │เพิ่มสินค้า│     │
       │ │มีอยู่แล้ว│ │ลงตะกร้า  │     │
       │ └────┬────┘ └────┬────┘     │
       │      │           │           │
       │      │           │ [บันทึกใน localStorage]
       │      │           ▼           │
       │      │    ┌─────────────┐  │
       │      │    │ บันทึกตะกร้า │  │
       │      │    └──────┬──────┘  │
       │      │           │           │
       │      │           │ [อัปเดต badge]
       │      │           ▼           │
       │      │    ┌─────────────┐  │
       │      │    │ อัปเดตจำนวน  │  │
       │      │    │ สินค้าในตะกร้า│  │
       │      │    └──────┬──────┘  │
       │      │           │           │
       │      └───────────┴───────────┘
       │                  │
       │                  │ [แสดงแจ้งเตือน]
       │                  ▼
       │          ┌─────────────┐
       │          │ แจ้งเตือน    │
       │          │ สำเร็จ      │
       │          └──────┬──────┘
       │                  │
       └──────────────────┴──────────────────┘
                           │
                           │ [เสร็จสิ้น]
                           ▼
                    ┌─────────────┐
                    │   สิ้นสุด    │
                    └─────────────┘
```

### 3.2.4 Activity Diagram - กระบวนการค้นหาสูตรอาหารและเพิ่มลงตะกร้า

```
                    ┌─────────────┐
                    │   เริ่มต้น   │
                    └──────┬──────┘
                           │
                           │ [เปิดหน้าค้นหาสูตรอาหาร]
                           ▼
                    ┌─────────────┐
                    │ กรอกคำค้นหา  │
                    └──────┬──────┘
                           │
                           │ [กดปุ่มค้นหา]
                           ▼
                    ┌─────────────┐
                    │ ส่งคำค้นหา   │
                    │ ไป Backend  │
                    └──────┬──────┘
                           │
                           │ [Backend เรียก Spoonacular API]
                           ▼
                    ┌─────────────┐
                    │ เรียก        │
                    │ Spoonacular │
                    │ API         │
                    └──────┬──────┘
                           │
        ┌──────────────────┼──────────────────┐
        │                  │                  │
        │ [พบข้อมูล]       │ [ไม่พบข้อมูล]     │ [เกิดข้อผิดพลาด]
        ▼                  ▼                  ▼
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│ แสดงผลลัพธ์ │    │ แสดงข้อความ  │    │ แสดงข้อผิด   │
│ การค้นหา    │    │ ไม่พบข้อมูล  │    │ พลาด        │
└──────┬──────┘    └──────┬──────┘    └──────┬──────┘
       │                  │                  │
       │ [คลิกดูรายละเอียด]│                  │
       ▼                  │                  │
┌─────────────┐          │                  │
│ แสดงข้อมูล   │          │                  │
│ รายละเอียด   │          │                  │
│ สูตรอาหาร    │          │                  │
└──────┬──────┘          │                  │
       │                  │                  │
       │ [ดูโภชนาการ]      │                  │
       ▼                  │                  │
┌─────────────┐          │                  │
│ เรียก Nutrition│        │                  │
│ API เพื่อดึง  │          │                  │
│ ข้อมูลโภชนาการ│          │                  │
└──────┬──────┘          │                  │
       │                  │                  │
       │ [แสดงข้อมูลโภชนาการ]
       ▼                  │                  │
┌─────────────┐          │                  │
│ แสดงข้อมูล   │          │                  │
│ โภชนาการ     │          │                  │
└──────┬──────┘          │                  │
       │                  │                  │
       │ [เพิ่มลงตะกร้า]   │                  │
       ▼                  │                  │
┌─────────────┐          │                  │
│ ตรวจสอบ      │          │                  │
│ สูตรใน       │          │                  │
│ ตะกร้า       │          │                  │
└──────┬──────┘          │                  │
       │                  │                  │
       │ [สูตรอยู่ในตะกร้า?]
       ▼
┌─────────────┐
│ สูตร        │
│ อยู่ใน      │
│ ตะกร้า?     │
└──────┬──────┘
       │
       │
       │      ┌───────────┼───────────┐
       │      │           │           │
       │      │ [ใช่]      │ [ไม่ใช่]   │
       │      ▼           ▼           │
       │ ┌─────────┐ ┌─────────┐     │
       │ │แสดงข้อความ│ │เพิ่มสูตร │     │
       │ │มีอยู่แล้ว│ │ลงตะกร้า  │     │
       │ └────┬────┘ └────┬────┘     │
       │      │           │           │
       │      │           │ [บันทึกใน localStorage]
       │      │           ▼           │
       │      │    ┌─────────────┐  │
       │      │    │ บันทึกตะกร้า │  │
       │      │    └──────┬──────┘  │
       │      │           │           │
       │      │           │ [อัปเดต badge]
       │      │           ▼           │
       │      │    ┌─────────────┐  │
       │      │    │ อัปเดตจำนวน  │  │
       │      │    │ สินค้าในตะกร้า│  │
       │      │    └──────┬──────┘  │
       │      │           │           │
       │      └───────────┴───────────┘
       │                  │
       │                  │ [แสดงแจ้งเตือน]
       │                  ▼
       │          ┌─────────────┐
       │          │ แจ้งเตือน    │
       │          │ สำเร็จ      │
       │          └──────┬──────┘
       │                  │
       └──────────────────┴──────────────────┘
                           │
                           │ [เสร็จสิ้น]
                           ▼
                    ┌─────────────┐
                    │   สิ้นสุด    │
                    └─────────────┘
```

---

## 4. State Diagram

### 4.1 State Diagram - ระบบตะกร้าสินค้า

```
                    ┌─────────────┐
                    │   ตะกร้าว่าง  │
                    └──────┬───────┘
                           │
                           │ [เพิ่มสินค้า]
                           ▼
                    ┌─────────────┐
                    │ มีสินค้า     │
                    │ ในตะกร้า     │
                    └──────┬───────┘
                           │
        ┌──────────────────┼──────────────────┐
        │                  │                  │
        │ [เพิ่มสินค้า]     │ [ลบสินค้า]        │ [เสร็จสิ้น]
        ▼                  ▼                  ▼
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│ อัปเดต      │    │ อัปเดต      │    │ บันทึก      │
│ ตะกร้า       │    │ ตะกร้า       │    │ ประวัติ     │
└──────┬──────┘    └──────┬──────┘    └──────┬──────┘
       │                  │                  │
       └──────────────────┴──────────────────┘
                           │
                           │ [ล้างตะกร้า]
                           ▼
                    ┌─────────────┐
                    │   ตะกร้าว่าง  │
                    └─────────────┘
```

### 4.2 State Diagram - กระบวนการลงทะเบียน

```
                    ┌─────────────┐
                    │  เริ่มต้น     │
                    └──────┬───────┘
                           │
                           │ [กรอกข้อมูล]
                           ▼
                    ┌─────────────┐
                    │  กรอกข้อมูล   │
                    │  ลงทะเบียน   │
                    └──────┬───────┘
                           │
                           │ [บันทึกข้อมูล]
                           ▼
                    ┌─────────────┐
                    │  บันทึกข้อมูล │
                    │  ใน localStorage│
                    └──────┬───────┘
                           │
                           │ [ไปหน้า BMI]
                           ▼
                    ┌─────────────┐
                    │  คำนวณ BMI  │
                    └──────┬───────┘
                           │
                           │ [ส่งข้อมูล]
                           ▼
                    ┌─────────────┐
                    │  ส่งข้อมูล   │
                    │  ไป Backend │
                    └──────┬───────┘
                           │
                           │ [สำเร็จ]
                           ▼
                    ┌─────────────┐
                    │  ลงทะเบียน   │
                    │  สำเร็จ     │
                    └─────────────┘
```

### 4.3 State Diagram - กระบวนการค้นหา

```
                    ┌─────────────┐
                    │  เริ่มต้น     │
                    └──────┬───────┘
                           │
                           │ [กรอกคำค้นหา]
                           ▼
                    ┌─────────────┐
                    │  รอคำค้นหา   │
                    └──────┬───────┘
                           │
                           │ [กดค้นหา]
                           ▼
                    ┌─────────────┐
                    │  กำลังค้นหา  │
                    └──────┬───────┘
                           │
        ┌──────────────────┼──────────────────┐
        │                  │                  │
        │ [พบผลลัพธ์]      │ [ไม่พบผลลัพธ์]     │ [เกิดข้อผิดพลาด]
        ▼                  ▼                  ▼
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│ แสดงผล      │    │ แสดงข้อความ  │    │ แสดงข้อผิด   │
│ ลัพธ์        │    │ ไม่พบผลลัพธ์ │    │ พลาด        │
└──────┬──────┘    └──────┬──────┘    └──────┬──────┘
       │                  │                  │
       └──────────────────┴──────────────────┘
                           │
                           │ [ค้นหาใหม่]
                           ▼
                    ┌─────────────┐
                    │  รอคำค้นหา   │
                    └─────────────┘
```

---

## 5. Sequence Diagram

### 5.1 Sequence Diagram - กระบวนการลงทะเบียนและคำนวณ BMI

```
ผู้ใช้          หน้า Register    localStorage    หน้า BMI      Backend API
  │                │                 │              │              │
  │──กรอกข้อมูล────▶│                 │              │              │
  │                │                 │              │              │
  │──กด Register──▶│                 │              │              │
  │                │                 │              │              │
  │                │──บันทึกข้อมูล───▶│              │              │
  │                │                 │              │              │
  │                │──ไปหน้า BMI─────┼──────────────▶│              │
  │                │                 │              │              │
  │                │                 │              │              │
  │                                │──กรอกน้ำหนัก/ส่วนสูง──▶│              │
  │                                │              │              │
  │                                │──คำนวณ BMI───▶│              │
  │                                │              │              │
  │                                │──แสดงผลลัพธ์──▶│              │
  │                                │              │              │
  │                                │──กดต่อไป──────▶│              │
  │                                │              │              │
  │                                │              │──ส่งข้อมูล───▶│
  │                                │              │              │
  │                                │              │◀──Token & Data──│
  │                                │              │              │
  │                                │◀──บันทึกข้อมูล──│              │
  │                                │              │              │
  │                                │──ไปหน้าหลัก───▶│              │
  │                                │              │              │
```

### 5.2 Sequence Diagram - กระบวนการค้นหาสินค้าและเพิ่มลงตะกร้า

```
ผู้ใช้          หน้า Search      Backend API    OpenFoodFacts   localStorage
  │                │                 │              │              │
  │──กรอกคำค้นหา───▶│                 │              │              │
  │                │                 │              │              │
  │──กดค้นหา───────▶│                 │              │              │
  │                │                 │              │              │
  │                │──ส่งคำค้นหา─────▶│              │              │
  │                │                 │              │              │
  │                │                 │──เรียก API───▶│              │
  │                │                 │              │              │
  │                │                 │◀──ข้อมูลสินค้า──│              │
  │                │                 │              │              │
  │                │◀──ผลลัพธ์───────│              │              │
  │                │                 │              │              │
  │◀──แสดงผลลัพธ์───│                 │              │              │
  │                │                 │              │              │
  │──เลือกสินค้า───▶│                 │              │              │
  │                │                 │              │              │
  │──ดูโภชนาการ────▶│                 │              │              │
  │                │                 │              │              │
  │◀──แสดงโภชนาการ──│                 │              │              │
  │                │                 │              │              │
  │──เพิ่มลงตะกร้า──▶│                 │              │              │
  │                │                 │              │              │
  │                │──บันทึกตะกร้า───┼──────────────┼─────────────▶│
  │                │                 │              │              │
  │◀──แจ้งเตือน────│                 │              │              │
  │                │                 │              │              │
```

### 5.3 Sequence Diagram - กระบวนการค้นหาสูตรอาหาร

```
ผู้ใช้          หน้า Recipe      Spoonacular API   localStorage
  │                │                 │              │
  │──กรอกคำค้นหา───▶│                 │              │
  │                │                 │              │
  │──กดค้นหา───────▶│                 │              │
  │                │                 │              │
  │                │──เรียก API──────▶│              │
  │                │                 │              │
  │                │◀──ข้อมูลสูตร─────│              │
  │                │                 │              │
  │◀──แสดงผลลัพธ์───│                 │              │
  │                │                 │              │
  │──ดูรายละเอียด───▶│                 │              │
  │                │                 │              │
  │                │──เรียก Nutrition API──▶│              │
  │                │                 │              │
  │                │──เรียก Info API──▶│              │
  │                │                 │              │
  │                │◀──ข้อมูลโภชนาการ──│              │
  │                │                 │              │
  │                │◀──ข้อมูลสูตร─────│              │
  │                │                 │              │
  │◀──แสดงรายละเอียด│                 │              │
  │                │                 │              │
  │──เพิ่มลงตะกร้า──▶│                 │              │
  │                │                 │              │
  │                │──บันทึกตะกร้า───┼──────────────▶│
  │                │                 │              │
  │◀──แจ้งเตือน────│                 │              │
  │                │                 │              │
```

### 5.4 Sequence Diagram - กระบวนการสแกนบาร์โค้ด

```
ผู้ใช้          หน้า Main        Backend API    OpenFoodFacts   หน้า Result
  │                │                 │              │              │
  │──เลือกรูปภาพ───▶│                 │              │              │
  │                │                 │              │              │
  │──ยืนยัน───────▶│                 │              │              │
  │                │                 │              │              │
  │                │──ส่งรูปภาพ──────▶│              │              │
  │                │                 │              │              │
  │                │                 │──สแกนบาร์โค้ด│              │
  │                │                 │              │              │
  │                │                 │──ค้นหาข้อมูล──▶│              │
  │                │                 │              │              │
  │                │                 │◀──ข้อมูลสินค้า──│              │
  │                │                 │              │              │
  │                │◀──ผลลัพธ์───────│              │              │
  │                │                 │              │              │
  │                │──บันทึกผลลัพธ์──┼──────────────┼──────────────┼──▶│
  │                │                 │              │              │
  │                │──ไปหน้า Result──┼──────────────┼──────────────┼──▶│
  │                │                 │              │              │
  │                                │              │              │──โหลดข้อมูล──▶│
  │                                │              │              │
  │                                │              │              │◀──แสดงผลลัพธ์──│
  │                                │              │              │
  │◀──แสดงผลลัพธ์───────────────────────────────────────────────────────│
  │                                │              │              │
```

### 5.5 Sequence Diagram - กระบวนการเสร็จสิ้นตะกร้า

```
ผู้ใช้          หน้า Cart        localStorage    หน้า History
  │                │                 │              │
  │──เปิดตะกร้า────▶│                 │              │
  │                │                 │              │
  │                │──ดึงข้อมูลตะกร้า─▶│              │
  │                │                 │              │
  │                │◀──ข้อมูลตะกร้า───│              │
  │                │                 │              │
  │◀──แสดงตะกร้า────│                 │              │
  │                │                 │              │
  │──กดเสร็จสิ้น───▶│                 │              │
  │                │                 │              │
  │                │──คำนวณแคลอรี่───▶│              │
  │                │                 │              │
  │                │──สร้างประวัติ───▶│              │
  │                │                 │              │
  │                │──บันทึกประวัติ───▶│              │
  │                │                 │              │
  │                │──ล้างตะกร้า─────▶│              │
  │                │                 │              │
  │◀──แจ้งเตือน────│                 │              │
  │                │                 │              │
```

---

## 6. Collaboration Diagram

### 6.1 Collaboration Diagram - กระบวนการค้นหาสินค้า

```
                    ┌─────────────┐
                    │   ผู้ใช้     │
                    └──────┬──────┘
                           │ 1: กรอกคำค้นหา
                           │
                           ▼
                    ┌─────────────┐
                    │ หน้า Search  │
                    └──────┬──────┘
                           │ 2: ส่งคำค้นหา
                           │
                           ▼
                    ┌─────────────┐
                    │ Backend API │
                    └──────┬──────┘
                           │ 3: เรียก OpenFoodFacts
                           │
                           ▼
                    ┌─────────────┐
                    │OpenFoodFacts│
                    └──────┬──────┘
                           │ 4: ส่งข้อมูลสินค้า
                           │
                           ▼
                    ┌─────────────┐
                    │ Backend API │
                    └──────┬──────┘
                           │ 5: ส่งผลลัพธ์
                           │
                           ▼
                    ┌─────────────┐
                    │ หน้า Search  │
                    └──────┬──────┘
                           │ 6: แสดงผลลัพธ์
                           │
                           ▼
                    ┌─────────────┐
                    │   ผู้ใช้     │
                    └─────────────┘
```

### 6.2 Collaboration Diagram - กระบวนการเพิ่มสินค้าลงตะกร้า

```
                    ┌─────────────┐
                    │   ผู้ใช้     │
                    └──────┬──────┘
                           │ 1: กดเพิ่มลงตะกร้า
                           │
                           ▼
                    ┌─────────────┐
                    │ หน้า Search  │
                    └──────┬──────┘
                           │ 2: เรียก addToCart()
                           │
                           ▼
                    ┌─────────────┐
                    │  cart.js    │
                    └──────┬──────┘
                           │ 3: ดึงตะกร้า
                           │
                           ▼
                    ┌─────────────┐
                    │localStorage │
                    └──────┬──────┘
                           │ 4: ส่งข้อมูลตะกร้า
                           │
                           ▼
                    ┌─────────────┐
                    │  cart.js    │
                    └──────┬──────┘
                           │ 5: เพิ่มสินค้า
                           │ 6: บันทึกตะกร้า
                           │
                           ▼
                    ┌─────────────┐
                    │localStorage │
                    └──────┬──────┘
                           │ 7: อัปเดต badge
                           │
                           ▼
                    ┌─────────────┐
                    │ หน้า Search  │
                    └──────┬──────┘
                           │ 8: แสดงแจ้งเตือน
                           │
                           ▼
                    ┌─────────────┐
                    │   ผู้ใช้     │
                    └─────────────┘
```

---

## 7. สรุป

เอกสาร SRS นี้ได้อธิบายความต้องการของระบบจัดการอาหารและโภชนาการ โดยครอบคลุม:
- Use Case Diagram และคำอธิบาย Use Cases
- DFD Level 0 และ Level 1
- State Diagrams สำหรับกระบวนการต่างๆ
- Sequence Diagrams และ Collaboration Diagrams สำหรับ scenario หลัก

ระบบนี้เป็น Web Application ที่ช่วยให้ผู้ใช้สามารถจัดการข้อมูลอาหารและโภชนาการได้อย่างมีประสิทธิภาพ

